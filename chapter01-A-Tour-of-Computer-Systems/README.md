# chapter01

## 编译运行

C语言: ANSI C标准, 用于Unix设计

.c → 预编译 → .i → 编译 → .s → 汇编 → .o → 链接 → a.out

-E  -S  -c   -l

hello.c对应的汇编代码

```assembly
main:
  subq      $8, %rsp
  movl      $.LC0, %edi
  call      puts
  movl      $0, %eax
  addq      $8, %rsp
  ret
```

## 虚拟存储

Linux虚拟地址空间: 底部是用户空间, 高地址顶部是内核空间

```
|       内核虚拟空间(用户程序不可见)
|            用户栈(运行时创建)
|                    ↓
|
|                    ↑
| 共享库的内存映射区域(mmap装载动态共享库或者malloc创建大内存)
|                    ↑
|          堆(进程通过malloc分配内存)
|           .bss(未初始化的全局变量)
|      .data(初始化的不为0的数据,静态分配)
|             .text(只读代码段)
|  保留区(未赋予物理地址,任何对它的引用都是非法的)
```

## 并发和并行

多核处理器是将多个处理器核心集成到一个集成电路芯片上
- 4个CPU核心
- 每个核心都有两个L1 cache: L1 data cache 和 L1 instruction cache
- 每个核心都有一个L2 cache
- 四个核共用一个L3高速缓存

超线程
- CPU某些部件具有多个备份例如PC和Regs, 浮点计算部件是唯一的
- 在加载数据到高速缓存时，CPU可以同时执行另外一个线程
- Core i7可以每个核执行2个线程，因此4核实际上可以并行执行8个线程

指令集并行
- 流水线技术，将指令分为不同步骤，接近一个周期执行一条指令
- 超标量：CPU多个部件可以同时执行不同的指令
- SIMD单指令多数据并行：特殊的硬件可以一条指令并行执行，例如处理器都可以并行的对8对单精度浮点数执行加法操作

## 抽象

文件是对IO的抽象

虚拟内存是对程序存储器的抽象

进程是对正在运行的程序的抽象

虚拟机是对整个计算机的抽象